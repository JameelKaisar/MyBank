<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css" />
</head>
<body>
    <div class="container mt-3">

        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-home-tab" data-toggle="pill" data-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Home</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-details-tab" data-toggle="pill" data-target="#pills-details" type="button" role="tab" aria-controls="pills-details" aria-selected="false">User Details</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-transaction-tab" data-toggle="pill" data-target="#pills-transaction" type="button" role="tab" aria-controls="pills-transaction" aria-selected="false">Transaction History</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-update-tab" data-toggle="pill" data-target="#pills-update" type="button" role="tab" aria-controls="pills-update" aria-selected="false">Update Details</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-search-tab" data-toggle="pill" data-target="#pills-search" type="button" role="tab" aria-controls="pills-search" aria-selected="false" th:if="${admin}">User Search</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-list-tab" data-toggle="pill" data-target="#pills-list" type="button" role="tab" aria-controls="pills-list" aria-selected="false" th:if="${admin}">User List</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-logout-tab" data-toggle="pill" data-target="#pills-logout" type="button" role="tab" aria-controls="pills-logout" aria-selected="false">Logout</button>
            </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                <div class="jumbotron text-center mt-3">
                    <h2>Welcome <b><span th:text="${name}">Name</span></b></h2>
                    <p>Logged in as: <span th:text="${admin} ? 'Admin' : 'User'">User</span></p>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-details" role="tabpanel" aria-labelledby="pills-details-tab">
                <div class="card mb-3">
                    <h3 class="card-header">User Details</h3>
                    <div class="card-body">
                        <p class="card-text">Email: <span th:text="${email}">Email</span></p>
                        <p class="card-text">Name: <span th:text="${name}">Name</span></p>
                        <p class="card-text">Address: <span th:text="${address}">Address</span></p>
                        <p class="card-text">City: <span th:text="${city}">City</span></p>
                        <p class="card-text">Pin Code: <span th:text="${pin}">Pin Code</span></p>
                        <p class="card-text">Aadhar Number: <span th:text="${aadhar}">Aadhar Number</span></p>
                        <p class="card-text">Phone Number: <span th:text="${phone}">Phone Number</span></p>
                        <p class="card-text">Role: <span th:text="${admin} ? 'Admin' : 'User'">User</span></p>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-transaction" role="tabpanel" aria-labelledby="pills-transaction-tab">
                <div class="card mb-3">
                    <h3 class="card-header">Transaction History</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Transaction Type</th>
                                <th>Amount</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Credit</td>
                                <td>1000</td>
                                <td>1000</td>
                            </tr>
                            <tr>
                                <td>Credit</td>
                                <td>500</td>
                                <td>1500</td>
                            </tr>
                            <tr>
                                <td>Debit</td>
                                <td>400</td>
                                <td>1100</td>
                            </tr>
                            <tr>
                                <td>Credit</td>
                                <td>100</td>
                                <td>1200</td>
                            </tr>
                            <tr>
                                <td>Debit</td>
                                <td>300</td>
                                <td>900</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-update" role="tabpanel" aria-labelledby="pills-update-tab">
                <div class="card mb-3">
                    <h3 class="card-header">Update Details</h3>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                                <div th:if="${param.error}" class="my-3">
                                    <div class="alert alert-danger">Unknown Error</div>
                                </div>
                                <form method="post" th:action="@{/home}" class="form">
                                    <div class="form-group">
                                        <label for="update-email">Email</label>
                                        <input type="email" id="update-email" th:value="${email}" class="form-control" maxlength="128" placeholder="Email" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label for="update-name">Name</label>
                                        <input type="text" name="name" id="update-name" th:value="${name}" class="form-control" maxlength="128" placeholder="Name" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-address">Address</label>
                                        <input type="text" name="address" id="update-address" th:value="${address}" class="form-control" maxlength="256" placeholder="Address" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-city">City</label>
                                        <input type="text" name="city" id="update-city" th:value="${city}" class="form-control" maxlength="64" placeholder="City" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-pin">Pin Code</label>
                                        <input type="text" name="pin" id="update-pin" th:value="${pin}" class="form-control" maxlength="6" placeholder="Pin Code" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-aadhar">Aadhar Number</label>
                                        <input type="text" name="aadhar" id="update-aadhar" th:value="${aadhar}" class="form-control" maxlength="12" placeholder="Aadhar Number" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-phone">Phone Number</label>
                                        <input type="text" name="phone" id="update-phone" th:value="${phone}" class="form-control" maxlength="10" placeholder="Phone Number" required>
                                    </div>
                                    <div class="form-group my-3">
                                        <label for="update-role">Role</label>
                                        <select id="update-role" class="form-control" disabled>
                                            <option value="0" th:selected="${admin} == false">User</option>
                                            <option value="1" th:selected="${admin} == true">Admin</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Update</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-search" role="tabpanel" aria-labelledby="pills-search-tab">
                <div class="card mb-3" th:if="${admin}">
                    <h3 class="card-header">User Search</h3>
                    <div class="card-body text-center">
                        <div class="row">
                            <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                                <div th:if="${param.qerror}" class="my-3">
                                    <div class="alert alert-danger">Unknown Error</div>
                                </div>
                                <form method="get" th:action="@{/home}" class="form text-center">
                                    <div class="form-group my-3">
                                        <select name="type" class="form-control" required>
                                            <option value="name" th:selected="${paramType} == 'name'">Name</option>
                                            <option value="aadhar" th:selected="${paramType} == 'aadhar'">Aadhar</option>
                                            <option value="phone" th:selected="${paramType} == 'phone'">Phone</option>
                                        </select>
                                    </div>
                                    <div class="form-group my-3">
                                        <input type="text" name="query" th:value="${paramQuery}" class="form-control" maxlength="64" placeholder="Query" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div th:if="${param.type}">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>Name</th>
                                    <th>Address</th>
                                    <th>City</th>
                                    <th>Pin Code</th>
                                    <th>Aadhar Number</th>
                                    <th>Phone Number</th>
                                    <th>Role</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="user: ${queryUsers}">
                                    <td th:text="${user.email}"></td>
                                    <td th:text="${user.name}"></td>
                                    <td th:text="${user.address}"></td>
                                    <td th:text="${user.city}"></td>
                                    <td th:text="${user.pin}"></td>
                                    <td th:text="${user.aadhar}"></td>
                                    <td th:text="${user.phone}"></td>
                                    <td th:text="${user.admin} ? 'Admin' : 'User'"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-list" role="tabpanel" aria-labelledby="pills-list-tab">
                <div class="card mb-3" th:if="${admin}">
                    <h3 class="card-header">User List</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>City</th>
                                <th>Pin Code</th>
                                <th>Aadhar Number</th>
                                <th>Phone Number</th>
                                <th>Role</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="user: ${users}">
                                <td th:text="${user.email}"></td>
                                <td th:text="${user.name}"></td>
                                <td th:text="${user.address}"></td>
                                <td th:text="${user.city}"></td>
                                <td th:text="${user.pin}"></td>
                                <td th:text="${user.aadhar}"></td>
                                <td th:text="${user.phone}"></td>
                                <td th:text="${user.admin} ? 'Admin' : 'User'"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-logout" role="tabpanel" aria-labelledby="pills-logout-tab">
                <div class="jumbotron text-center my-3">
                    <form method="post" th:action="@{/logout}" class="text-center">
                        <input type="submit" value="Logout" class="btn btn-danger"/>
                    </form>
                </div>
            </div>

        </div>
    </div>

    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
