<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>
<body>
    <h1>Home Page</h1>

    <div>
        Welcome <b>[[${username}]]</b>
        <br>
        Logged in as <td th:text="${admin} ? 'Admin' : 'User'" />
    </div>

    <div>
        <h3>User Details</h3>
        <p>Username: [[${username}]]</p>
        <p>Email: [[${email}]]</p>
    </div>

    <div>
        <h3>Update Details</h3>
        <form method="post" th:action="@{/home}">
            <input type="email" name="email" th:value="${email}" maxlength="128" required />
            <button type="submit">Update</button>
        </form>
    </div>

    <div th:if="${admin}">
        <h3>User List</h3>
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="user: ${users}">
                    <td th:text="${user.username}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${admin} ? 'Admin' : 'User'"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <form method="post" th:action="@{/logout}">
        <input type="submit" value="Logout" />
    </form>
</body>
</html>
